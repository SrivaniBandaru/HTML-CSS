"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8700],{96391:function(e,t,r){r.d(t,{BU:function(){return Pt},CX:function(){return mt},F3:function(){return me},_7:function(){return w},mH:function(){return Dt},vt:function(){return Qe}});var a=r(6907),n=r.n(a),o=r(23279),i=r.n(o),l=r(62614),s=r.n(l),d=r(67294),c=r(94203),u=r(77493),f=r(58354),v=r(18156),h=r(73935);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var m=(0,d.createContext)(null),w=()=>{var e=(0,d.useContext)(m);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},b=parseInt(d.version.split(".")[0],10),M="undefined"!==typeof navigator&&"undefined"!==typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,x="undefined"!==typeof navigator&&/Mac OS X/.test(navigator.userAgent),k="undefined"!==typeof navigator&&/Android/.test(navigator.userAgent),y="undefined"!==typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),C="undefined"!==typeof navigator&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),E="undefined"!==typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),L="undefined"!==typeof navigator&&/Chrome/i.test(navigator.userAgent),D="undefined"!==typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),O=k&&"undefined"!==typeof navigator&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),S="undefined"!==typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),B="undefined"!==typeof navigator&&/.*UCBrowser/.test(navigator.userAgent),T="undefined"!==typeof navigator&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),F=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),P=(!D||!O)&&!E&&"undefined"!==typeof globalThis&&globalThis.InputEvent&&"function"===typeof globalThis.InputEvent.prototype.getTargetRanges,R=new WeakMap,N=new WeakMap,W=new WeakMap,A=new WeakMap,j=new WeakMap,I=new WeakMap,q=new WeakMap,Y=new WeakMap,_=new WeakMap,U=new WeakMap,$=new WeakMap,z=new WeakMap,V=new WeakMap,H=new WeakMap,K=new WeakMap,X=new WeakMap,J=new WeakMap,Z=new WeakMap,G=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=Symbol("placeholder"),re=Symbol("mark-placeholder"),ae=globalThis.Text,ne=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,oe=e=>ie(e)&&1===e.nodeType,ie=e=>{var t=ne(e);return!!t&&e instanceof t.Node},le=e=>{var t=e&&e.anchorNode&&ne(e.anchorNode);return!!t&&e instanceof t.Selection},se=e=>ie(e)&&3===e.nodeType,de=(e,t,r)=>{for(var a,{childNodes:n}=e,o=n[t],i=t,l=!1,s=!1;(ie(a=o)&&8===a.nodeType||oe(o)&&0===o.childNodes.length||oe(o)&&"false"===o.getAttribute("contenteditable"))&&(!l||!s);)i>=n.length?(l=!0,i=t-1,r="backward"):i<0?(s=!0,i=t+1,r="forward"):(o=n[i],t=i,i+="forward"===r?1:-1);return[o,t]},ce=(e,t,r)=>{var[a]=de(e,t,r);return a},ue=e=>{var t="";if(se(e)&&e.nodeValue)return e.nodeValue;if(oe(e)){for(var r of Array.from(e.childNodes))t+=ue(r);var a=getComputedStyle(e).getPropertyValue("display");"block"!==a&&"list"!==a&&"BR"!==e.tagName||(t+="\n")}return t},fe=/data-slate-fragment="(.+?)"/m,ve=e=>{var t=e.getData("text/html"),[,r]=t.match(fe)||[];return r},he=(e,t,r)=>{var{target:a}=t;if(oe(a)&&a.matches('[contentEditable="false"]'))return!1;var{document:n}=me.getWindow(e);if(n.contains(a))return me.hasDOMNode(e,a,{editable:!0});var o=r.find((e=>{var{addedNodes:t,removedNodes:r}=e;for(var n of t)if(n===a||n.contains(a))return!0;for(var o of r)if(o===a||o.contains(a))return!0}));return!(!o||o===t)&&he(e,o,r)},pe=0;class ge{constructor(){this.id="".concat(pe++)}}var me={androidPendingDiffs:e=>Z.get(e),androidScheduleFlush:e=>{var t;null===(t=K.get(e))||void 0===t||t()},blur:e=>{var t=me.toDOMNode(e,e),r=me.findDocumentOrShadowRoot(e);$.set(e,!1),r.activeElement===t&&t.blur()},deselect:e=>{var{selection:t}=e,r=me.findDocumentOrShadowRoot(e).getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&u.YR.deselect(e)},findDocumentOrShadowRoot:e=>{var t=me.toDOMNode(e,e),r=t.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&null!=r.getSelection?r:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:r,clientY:a,target:n}=t;if(null==r||null==a)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var o,i=me.toSlateNode(e,t.target),l=me.findPath(e,i);if(u.W_.isElement(i)&&u.ML.isVoid(e,i)){var s=n.getBoundingClientRect(),d=e.isInline(i)?r-s.left<s.left+s.width-r:a-s.top<s.top+s.height-a,c=u.ML.point(e,l,{edge:d?"start":"end"}),f=d?u.ML.before(e,c):u.ML.after(e,c);if(f)return u.ML.range(e,f)}var{document:v}=me.getWindow(e);if(v.caretRangeFromPoint)o=v.caretRangeFromPoint(r,a);else{var h=v.caretPositionFromPoint(r,a);h&&((o=v.createRange()).setStart(h.offsetNode,h.offset),o.setEnd(h.offsetNode,h.offset))}if(!o)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return me.toSlateRange(e,o,{exactMatch:!1,suppressThrow:!1})},findKey:(e,t)=>{var r=Y.get(t);return r||(r=new ge,Y.set(t,r)),r},findPath:(e,t)=>{for(var r=[],a=t;;){var n=N.get(a);if(null==n){if(u.ML.isEditor(a))return r;break}var o=R.get(a);if(null==o)break;r.unshift(o),a=n}throw new Error("Unable to find the path for Slate node: ".concat(u.o4.stringify(t)))},focus:e=>{var t=me.toDOMNode(e,e),r=me.findDocumentOrShadowRoot(e);$.set(e,!0),r.activeElement!==t&&t.focus({preventScroll:!0})},getWindow:e=>{var t=W.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{editable:n=!1}=a,o=me.toDOMNode(e,e);try{r=oe(t)?t:t.parentElement}catch(i){if(!i.message.includes('Permission denied to access property "nodeType"'))throw i}return!!r&&(r.closest("[data-slate-editor]")===o&&(!(n&&!r.isContentEditable)||("boolean"===typeof r.isContentEditable&&r.closest('[contenteditable="false"]')===o||!!r.getAttribute("data-slate-zero-width"))))},hasEditableTarget:(e,t)=>ie(t)&&me.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{var{anchor:r,focus:a}=t;return u.ML.hasPath(e,r.path)&&u.ML.hasPath(e,a.path)},hasSelectableTarget:(e,t)=>me.hasEditableTarget(e,t)||me.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>ie(t)&&me.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!z.get(e),isFocused:e=>!!$.get(e),isReadOnly:e=>!!U.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if(U.get(e))return!1;var r=me.hasTarget(e,t)&&me.toSlateNode(e,t);return u.W_.isElement(r)&&u.ML.isVoid(e,r)},setFragmentData:(e,t,r)=>e.setFragmentData(t,r),toDOMNode:(e,t)=>{var r=_.get(e),a=u.ML.isEditor(t)?A.get(e):null===r||void 0===r?void 0:r.get(me.findKey(e,t));if(!a)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(u.o4.stringify(t)));return a},toDOMPoint:(e,t)=>{var r,[a]=u.ML.node(e,t.path),n=me.toDOMNode(e,a);u.ML.void(e,{at:t})&&(t={path:t.path,offset:0});for(var o=Array.from(n.querySelectorAll("[data-slate-string], [data-slate-zero-width]")),i=0,l=0;l<o.length;l++){var s=o[l],d=s.childNodes[0];if(null!=d&&null!=d.textContent){var{length:c}=d.textContent,f=s.getAttribute("data-slate-length"),v=i+(null==f?c:parseInt(f,10)),h=o[l+1];if(t.offset===v&&null!==h&&void 0!==h&&h.hasAttribute("data-slate-mark-placeholder")){var p,g=h.childNodes[0];r=[g instanceof ae?g:h,null!==(p=h.textContent)&&void 0!==p&&p.startsWith("\ufeff")?1:0];break}if(t.offset<=v){r=[d,Math.min(c,Math.max(0,t.offset-i))];break}i=v}}if(!r)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(u.o4.stringify(t)));return r},toDOMRange:(e,t)=>{var{anchor:r,focus:a}=t,n=u.e6.isBackward(t),o=me.toDOMPoint(e,r),i=u.e6.isCollapsed(t)?o:me.toDOMPoint(e,a),l=me.getWindow(e).document.createRange(),[s,d]=n?i:o,[c,f]=n?o:i,v=!!(oe(s)?s:s.parentElement).getAttribute("data-slate-zero-width"),h=!!(oe(c)?c:c.parentElement).getAttribute("data-slate-zero-width");return l.setStart(s,v?1:d),l.setEnd(c,h?1:f),l},toSlateNode:(e,t)=>{var r=oe(t)?t:t.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var a=r?I.get(r):null;if(!a)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return a},toSlatePoint:(e,t,r)=>{var{exactMatch:a,suppressThrow:n}=r,[o,i]=a?t:(e=>{var[t,r]=e;if(oe(t)&&t.childNodes.length){var a=r===t.childNodes.length,n=a?r-1:r;for([t,n]=de(t,n,a?"backward":"forward"),a=n<r;oe(t)&&t.childNodes.length;){var o=a?t.childNodes.length-1:0;t=ce(t,o,a?"backward":"forward")}r=a&&null!=t.textContent?t.textContent.length:0}return[t,r]})(t),l=o.parentNode,s=null,d=0;if(l){var c,f,v=me.toDOMNode(e,e),h=l.closest('[data-slate-void="true"]'),p=h&&v.contains(h)?h:null,g=l.closest("[data-slate-leaf]"),m=null;if(g){if(s=g.closest('[data-slate-node="text"]')){var w=me.getWindow(e).document.createRange();w.setStart(s,0),w.setEnd(o,i);var b=w.cloneContents();[...Array.prototype.slice.call(b.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(b.querySelectorAll("[contenteditable=false]"))].forEach((e=>{k&&!a&&e.hasAttribute("data-slate-zero-width")&&e.textContent.length>0&&"\ufeff"!==e.textContext?e.textContent.startsWith("\ufeff")&&(e.textContent=e.textContent.slice(1)):e.parentNode.removeChild(e)})),d=b.textContent.length,m=s}}else if(p){for(var M=p.querySelectorAll("[data-slate-leaf]"),x=0;x<M.length;x++){var C=M[x];if(me.hasDOMNode(e,C)){g=C;break}}g?(s=g.closest('[data-slate-node="text"]'),d=(m=g).textContent.length,m.querySelectorAll("[data-slate-zero-width]").forEach((e=>{d-=e.textContent.length}))):d=1}m&&d===m.textContent.length&&k&&"z"===m.getAttribute("data-slate-zero-width")&&null!==(c=m.textContent)&&void 0!==c&&c.startsWith("\ufeff")&&(l.hasAttribute("data-slate-zero-width")||y&&null!==(f=m.textContent)&&void 0!==f&&f.endsWith("\n\n"))&&d--}if(k&&!s&&!a){var E=l.hasAttribute("data-slate-node")?l:l.closest("[data-slate-node]");if(E&&me.hasDOMNode(e,E,{editable:!0})){var L=me.toSlateNode(e,E),{path:D,offset:O}=u.ML.start(e,me.findPath(e,L));return E.querySelector("[data-slate-leaf]")||(O=i),{path:D,offset:O}}}if(!s){if(n)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var S=me.toSlateNode(e,s);return{path:me.findPath(e,S),offset:d}},toSlateRange:(e,t,r)=>{var a,n,o,i,l,s,{exactMatch:d,suppressThrow:c}=r;if(le(t)?t.anchorNode:t.startContainer)if(le(t)){if(y&&t.rangeCount>1){o=t.focusNode;var f=t.getRangeAt(0),v=t.getRangeAt(t.rangeCount-1);if(o instanceof HTMLTableRowElement&&f.startContainer instanceof HTMLTableRowElement&&v.startContainer instanceof HTMLTableRowElement){function x(e){return e.childElementCount>0?x(e.children[0]):e}var h=f.startContainer,p=v.startContainer,g=x(h.children[f.startOffset]),m=x(p.children[v.startOffset]);i=0,a=m.childNodes.length>0?m.childNodes[0]:m,o=g.childNodes.length>0?g.childNodes[0]:g,n=m instanceof HTMLElement?m.innerHTML.length:0}else f.startContainer===o?(a=v.endContainer,n=v.endOffset,i=f.startOffset):(a=f.startContainer,n=f.endOffset,i=v.startOffset)}else a=t.anchorNode,n=t.anchorOffset,o=t.focusNode,i=t.focusOffset;l=L&&(e=>{for(var t=e&&e.parentNode;t;){if("[object ShadowRoot]"===t.toString())return!0;t=t.parentNode}return!1})(a)||y?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed}else a=t.startContainer,n=t.startOffset,o=t.endContainer,i=t.endOffset,l=t.collapsed;if(null==a||null==o||null==n||null==i)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));"getAttribute"in o&&"false"===o.getAttribute("contenteditable")&&"true"!==o.getAttribute("data-slate-void")&&(o=a,i=(null===(s=a.textContent)||void 0===s?void 0:s.length)||0);var w=me.toSlatePoint(e,[a,n],{exactMatch:d,suppressThrow:c});if(!w)return null;var b=l?w:me.toSlatePoint(e,[o,i],{exactMatch:d,suppressThrow:c});if(!b)return null;var M={anchor:w,focus:b};return u.e6.isExpanded(M)&&u.e6.isForward(M)&&oe(o)&&u.ML.void(e,{at:M.focus,mode:"highest"})&&(M=u.ML.unhangRange(e,M,{voids:!0})),M}};function we(e,t){var{path:r,diff:a}=t;if(!u.ML.hasPath(e,r))return!1;var n=u.NB.get(e,r);if(!u.xv.isText(n))return!1;if(a.start!==n.text.length||0===a.text.length)return n.text.slice(a.start,a.start+a.text.length)===a.text;var o=u.y$.next(r);if(!u.ML.hasPath(e,o))return!1;var i=u.NB.get(e,o);return u.xv.isText(i)&&i.text.startsWith(a.text)}function be(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return r.reduce(((e,t)=>e.slice(0,t.start)+t.text+e.slice(t.end)),e)}function Me(e,t){var{start:r,end:a,text:n}=t,o=e.slice(r,a),i=function(e,t){for(var r=Math.min(e.length,t.length),a=0;a<r;a++)if(e.charAt(a)!==t.charAt(a))return a;return r}(o,n),l=function(e,t,r){for(var a=Math.min(e.length,t.length,r),n=0;n<a;n++)if(e.charAt(e.length-n-1)!==t.charAt(t.length-n-1))return n;return a}(o,n,Math.min(o.length-i,n.length-i)),s={start:r+i,end:a-l,text:n.slice(i,n.length-l)};return s.start===s.end&&0===s.text.length?null:s}function xe(e){var{path:t,diff:r}=e;return{anchor:{path:t,offset:r.start},focus:{path:t,offset:r.end}}}function ke(e,t){var{path:r,offset:a}=t;if(!u.ML.hasPath(e,r))return null;var n=u.NB.get(e,r);if(!u.xv.isText(n))return null;var o=u.ML.above(e,{match:t=>u.W_.isElement(t)&&u.ML.isBlock(e,t),at:r});if(!o)return null;for(;a>n.text.length;){var i=u.ML.next(e,{at:r,match:u.xv.isText});if(!i||!u.y$.isDescendant(i[1],o[1]))return null;a-=n.text.length,n=i[0],r=i[1]}return{path:r,offset:a}}function ye(e,t){var r=ke(e,t.anchor);if(!r)return null;if(u.e6.isCollapsed(t))return{anchor:r,focus:r};var a=ke(e,t.focus);return a?{anchor:r,focus:a}:null}function Ce(e,t,r){var a=Z.get(e),n=null===a||void 0===a?void 0:a.find((e=>{var{path:r}=e;return u.y$.equals(r,t.path)}));if(!n||t.offset<=n.diff.start)return u.E9.transform(t,r,{affinity:"backward"});var{diff:o}=n;if(t.offset<=o.start+o.text.length){var i={path:t.path,offset:o.start},l=u.E9.transform(i,r,{affinity:"backward"});return l?{path:l.path,offset:l.offset+t.offset-o.start}:null}var s={path:t.path,offset:t.offset-o.text.length+o.end-o.start},d=u.E9.transform(s,r,{affinity:"backward"});return d?"split_node"===r.type&&u.y$.equals(r.path,t.path)&&s.offset<r.position&&o.start<r.position?d:{path:d.path,offset:d.offset+o.text.length-o.end+o.start}:null}function Ee(e,t,r){var a=Ce(e,t.anchor,r);if(!a)return null;if(u.e6.isCollapsed(t))return{anchor:a,focus:a};var n=Ce(e,t.focus,r);return n?{anchor:a,focus:n}:null}function Le(e,t){var{path:r,diff:a,id:n}=e;switch(t.type){case"insert_text":return!u.y$.equals(t.path,r)||t.offset>=a.end?e:t.offset<=a.start?{diff:{start:t.text.length+a.start,end:t.text.length+a.end,text:a.text},id:n,path:r}:{diff:{start:a.start,end:a.end+t.text.length,text:a.text},id:n,path:r};case"remove_text":return!u.y$.equals(t.path,r)||t.offset>=a.end?e:t.offset+t.text.length<=a.start?{diff:{start:a.start-t.text.length,end:a.end-t.text.length,text:a.text},id:n,path:r}:{diff:{start:a.start,end:a.end-t.text.length,text:a.text},id:n,path:r};case"split_node":return!u.y$.equals(t.path,r)||t.position>=a.end?{diff:a,id:n,path:u.y$.transform(r,t,{affinity:"backward"})}:t.position>a.start?{diff:{start:a.start,end:Math.min(t.position,a.end),text:a.text},id:n,path:r}:{diff:{start:a.start-t.position,end:a.end-t.position,text:a.text},id:n,path:u.y$.transform(r,t,{affinity:"forward"})};case"merge_node":return u.y$.equals(t.path,r)?{diff:{start:a.start+t.position,end:a.end+t.position,text:a.text},id:n,path:u.y$.transform(r,t)}:{diff:a,id:n,path:u.y$.transform(r,t)}}var o=u.y$.transform(r,t);return o?{diff:a,path:o,id:n}:null}function De(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?De(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Se(e){var{editor:t,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:a}=e,n=!1,o=null,i=null,l=null,s=0,d=!1,c=()=>{var e=Q.get(t);if(Q.delete(t),e){var{selection:r}=t,a=ye(t,e);!a||r&&u.e6.equals(a,r)||u.YR.select(t,a)}},f=()=>{if(i&&(clearTimeout(i),i=null),l&&(clearTimeout(l),l=null),m()||g()){n||(n=!0,setTimeout((()=>n=!1))),g()&&(n="action");var e=t.selection&&u.ML.rangeRef(t,t.selection,{affinity:"forward"});J.set(t,t.marks),G.get(t),Z.get(t);for(var o,s=m();o=null===(f=Z.get(t))||void 0===f?void 0:f[0];){var f,v,h=X.get(t);void 0!==h&&(X.delete(t),t.marks=h),h&&!1===d&&(d=null);var p=xe(o);t.selection&&u.e6.equals(t.selection,p)||u.YR.select(t,p),o.diff.text?u.ML.insertText(t,o.diff.text):u.ML.deleteFragment(t),Z.set(t,null===(v=Z.get(t))||void 0===v?void 0:v.filter((e=>{var{id:t}=e;return t!==o.id}))),we(t,o)||(s=!1,G.delete(t),J.delete(t),n="action",Q.delete(t),r.cancel(),a.cancel(),null===e||void 0===e||e.unref())}var w=null===e||void 0===e?void 0:e.unref();if(!w||Q.get(t)||t.selection&&u.e6.equals(w,t.selection)||u.YR.select(t,w),g())(()=>{var e=G.get(t);if(G.delete(t),e){if(e.at){var r=u.E9.isPoint(e.at)?ke(t,e.at):ye(t,e.at);if(!r)return;var a=u.ML.range(t,r);t.selection&&u.e6.equals(t.selection,a)||u.YR.select(t,r)}e.run()}})();else{s&&r(),r.flush(),a.flush(),c();var b=J.get(t);J.delete(t),void 0!==b&&(t.marks=b,t.onChange())}}else c()},v=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=j.get(t);r&&(m()||e?r.style.display="none":r.style.removeProperty("display"))},h=(e,r)=>{var a,n=null!==(a=Z.get(t))&&void 0!==a?a:[];Z.set(t,n);var o=u.NB.leaf(t,e),i=n.findIndex((t=>u.y$.equals(t.path,e)));if(i<0)return Me(o.text,r)&&n.push({path:e,diff:r,id:s++}),void v();var l=function(e,t,r){var a=Math.min(t.start,r.start),n=Math.max(0,Math.min(t.start+t.text.length,r.end)-r.start),o=be(e,t,r),i=Math.max(r.start+r.text.length,t.start+t.text.length+(t.start+t.text.length>r.start?r.text.length:0)-n),l=o.slice(a,i);return Me(e,{start:a,end:Math.max(t.end,r.end-t.text.length+(t.end-t.start)),text:l})}(o.text,n[i].diff,r);if(!l)return n.splice(i,1),void v();n[i]=Oe(Oe({},n[i]),{},{diff:l})},p=function(e){var{at:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};d=!1,Q.delete(t),r.cancel(),a.cancel(),g()&&f(),G.set(t,{at:n,run:e}),l=setTimeout(f)},g=()=>!!G.get(t),m=()=>{var e;return!(null===(e=Z.get(t))||void 0===e||!e.length)},w=e=>{Q.set(t,e),i&&(clearTimeout(i),i=null);var{selection:r}=t;if(e){var a=!r||!u.y$.equals(r.anchor.path,e.anchor.path),n=!r||!u.y$.equals(r.anchor.path.slice(0,-1),e.anchor.path.slice(0,-1));(a&&d||n)&&(d=!1),(a||m())&&(i=setTimeout(f,200))}},b=()=>{g()||(l=setTimeout(f))};return{flush:f,scheduleFlush:b,hasPendingDiffs:m,hasPendingAction:g,hasPendingChanges:()=>g()||m(),isFlushing:()=>n,handleUserSelect:w,handleCompositionEnd:e=>{o&&clearTimeout(o),o=setTimeout((()=>{z.set(t,!1),f()}),25)},handleCompositionStart:e=>{z.set(t,!0),o&&(clearTimeout(o),o=null)},handleDOMBeforeInput:e=>{var r;i&&(clearTimeout(i),i=null);var{inputType:a}=e,n=null,o=e.dataTransfer||e.data||void 0;!1!==d&&"insertText"!==a&&"insertCompositionText"!==a&&(d=!1);var[l]=e.getTargetRanges();l&&(n=me.toSlateRange(t,l,{exactMatch:!1,suppressThrow:!0}));var s=me.getWindow(t).getSelection();if(!n&&s&&(l=s,n=me.toSlateRange(t,s,{exactMatch:!1,suppressThrow:!0})),n=null!==(r=n)&&void 0!==r?r:t.selection){var c,f=!0;if(a.startsWith("delete")){if(u.e6.isExpanded(n)){var[v,g]=u.e6.edges(n);if(u.NB.leaf(t,v.path).text.length===v.offset&&0===g.offset){var m=u.ML.next(t,{at:v.path,match:u.xv.isText});m&&u.y$.equals(m[1],g.path)&&(n={anchor:g,focus:g})}}var M=a.endsWith("Backward")?"backward":"forward",[x,k]=u.e6.edges(n),[y,C]=u.ML.leaf(t,x.path),E={text:"",start:x.offset,end:k.offset},L=Z.get(t),D=null===L||void 0===L?void 0:L.find((e=>u.y$.equals(e.path,C))),O=D?[D.diff,E]:[E];if(0===be(y.text,...O).length&&(f=!1),u.e6.isExpanded(n)){if(f&&u.y$.equals(n.anchor.path,n.focus.path)){var S={path:n.anchor.path,offset:x.offset},B=u.ML.range(t,S,S);return w(B),h(n.anchor.path,{text:"",end:k.offset,start:x.offset})}return p((()=>u.ML.deleteFragment(t,{direction:M})),{at:n})}}switch(a){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return p((()=>u.ML.deleteFragment(t)),{at:n});case"deleteContent":case"deleteContentForward":var{anchor:T}=n;if(f&&u.e6.isCollapsed(n)){var F=u.NB.leaf(t,T.path);if(T.offset<F.text.length)return h(T.path,{text:"",start:T.offset,end:T.offset+1})}return p((()=>u.ML.deleteForward(t)),{at:n});case"deleteContentBackward":var P,{anchor:R}=n,N=le(l)?l.isCollapsed:!(null===(P=l)||void 0===P||!P.collapsed);return f&&N&&u.e6.isCollapsed(n)&&R.offset>0?h(R.path,{text:"",start:R.offset-1,end:R.offset}):p((()=>u.ML.deleteBackward(t)),{at:n});case"deleteEntireSoftLine":return p((()=>{u.ML.deleteBackward(t,{unit:"line"}),u.ML.deleteForward(t,{unit:"line"})}),{at:n});case"deleteHardLineBackward":return p((()=>u.ML.deleteBackward(t,{unit:"block"})),{at:n});case"deleteSoftLineBackward":return p((()=>u.ML.deleteBackward(t,{unit:"line"})),{at:n});case"deleteHardLineForward":return p((()=>u.ML.deleteForward(t,{unit:"block"})),{at:n});case"deleteSoftLineForward":return p((()=>u.ML.deleteForward(t,{unit:"line"})),{at:n});case"deleteWordBackward":return p((()=>u.ML.deleteBackward(t,{unit:"word"})),{at:n});case"deleteWordForward":return p((()=>u.ML.deleteForward(t,{unit:"word"})),{at:n});case"insertLineBreak":return p((()=>u.ML.insertSoftBreak(t)),{at:n});case"insertParagraph":return p((()=>u.ML.insertBreak(t)),{at:n});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":if("DataTransfer"===(null===(c=o)||void 0===c?void 0:c.constructor.name))return p((()=>me.insertData(t,o)),{at:n});var W=null!==o&&void 0!==o?o:"";if(X.get(t)&&(W=W.replace("\ufeff","")),"insertText"===a&&/.*\n.*\n$/.test(W)&&(W=W.slice(0,-1)),W.includes("\n"))return p((()=>{var e=W.split("\n");e.forEach(((r,a)=>{r&&u.ML.insertText(t,r),a!==e.length-1&&u.ML.insertSoftBreak(t)}))}),{at:n});if(u.y$.equals(n.anchor.path,n.focus.path)){var[A,j]=u.e6.edges(n),I={start:A.offset,end:j.offset,text:W};if(W&&d&&"insertCompositionText"===a){var q=d.start+d.text.search(/\S|$/);I.start+I.text.search(/\S|$/)===q+1&&I.end===d.start+d.text.length?(I.start-=1,d=null,b()):d=!1}else d="insertText"===a&&(null===d?I:!(!d||!u.e6.isCollapsed(n)||d.end+d.text.length!==A.offset)&&Oe(Oe({},d),{},{text:d.text+W}));if(f)return void h(A.path,I)}return p((()=>u.ML.insertText(t,W)),{at:n})}}},handleKeyDown:e=>{m()||(v(!0),setTimeout(v))},handleDomMutations:e=>{var r;m()||g()||e.some((r=>he(t,r,e)))&&(null===(r=ee.get(t))||void 0===r||r())},handleInput:()=>{!g()&&m()||f()}}}var Be=F?d.useLayoutEffect:d.useEffect;var Te=["node"];function Fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var Pe={subtree:!0,childList:!0,characterData:!0},Re=k?e=>{var{node:t}=e,r=g(e,Te);if(!k)return null;var a=w(),n=function(){var e=(0,d.useRef)(!1);return(0,d.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),e.current}(),[o]=(0,d.useState)((()=>Se(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({editor:a},r))));return function(e,t,r){var[a]=(0,d.useState)((()=>new MutationObserver(t)));Be((()=>{a.takeRecords()})),(0,d.useEffect)((()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return a.observe(e.current,r),()=>a.disconnect()}),[a,e,r])}(t,o.handleDomMutations,Pe),K.set(a,o.scheduleFlush),n&&o.flush(),o}:()=>null,Ne=["anchor","focus"],We=["anchor","focus"],Ae=(e,t)=>{var r,a,n=g(e,Ne),o=g(t,We);return e[te]===t[te]&&(r=n,a=o,Object.keys(r).length===Object.keys(a).length&&Object.keys(r).every((e=>a.hasOwnProperty(e)&&r[e]===a[e])))},je=e=>{var{isLast:t,leaf:r,parent:a,text:n}=e,o=w(),i=me.findPath(o,n),l=u.y$.parent(i),s=!0===r[re];return o.isVoid(a)?d.createElement(Ye,{length:u.NB.string(a).length}):""!==r.text||a.children[a.children.length-1]!==n||o.isInline(a)||""!==u.ML.string(o,l)?""===r.text?d.createElement(Ye,{isMarkPlaceholder:s}):t&&"\n"===r.text.slice(-1)?d.createElement(Ie,{isTrailing:!0,text:r.text}):d.createElement(Ie,{text:r.text}):d.createElement(Ye,{isLineBreak:!0,isMarkPlaceholder:s})},Ie=e=>{var{text:t,isTrailing:r=!1}=e,a=(0,d.useRef)(null),n=()=>"".concat(null!==t&&void 0!==t?t:"").concat(r?"\n":""),[o]=(0,d.useState)(n);return Be((()=>{var e=n();a.current&&a.current.textContent!==e&&(a.current.textContent=e)})),d.createElement(qe,{ref:a},o)},qe=(0,d.memo)((0,d.forwardRef)(((e,t)=>d.createElement("span",{"data-slate-string":!0,ref:t},e.children)))),Ye=e=>{var{length:t=0,isLineBreak:r=!1,isMarkPlaceholder:a=!1}=e,n={"data-slate-zero-width":r?"n":"z","data-slate-length":t};return a&&(n["data-slate-mark-placeholder"]=!0),d.createElement("span",Object.assign({},n),k&&r?null:"\ufeff",r?d.createElement("br",null):null)};function _e(e){e.current&&(clearTimeout(e.current),e.current=null)}var Ue=e=>{var{leaf:t,isLast:r,text:a,parent:n,renderPlaceholder:o,renderLeaf:i=(e=>d.createElement(ze,Object.assign({},e)))}=e,l=w(),s=(0,d.useRef)(null),c=(0,d.useRef)(null),[u,v]=(0,d.useState)(!1),h=(0,d.useRef)(null),p=(0,d.useCallback)((e=>{if(function(e,t){e.current&&(e.current.disconnect(),t&&(e.current=null))}(s,null==e),null==e){var r;j.delete(l),null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,null)}else{if(j.set(l,e),!s.current){var a=window.ResizeObserver||f.do;s.current=new a((()=>{var r;null===(r=t.onPlaceholderResize)||void 0===r||r.call(t,e)}))}s.current.observe(e),c.current=e}}),[c,t,l]),g=d.createElement(je,{isLast:r,leaf:t,parent:n,text:a}),m=t[te];if((0,d.useEffect)((()=>(m?h.current||(h.current=setTimeout((()=>{v(!0),h.current=null}),300)):(_e(h),v(!1)),()=>_e(h))),[m,v]),m&&u){var b={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:C?"inherit":void 0},contentEditable:!1,ref:p}};g=d.createElement(d.Fragment,null,o(b),g)}return i({attributes:{"data-slate-leaf":!0},children:g,leaf:t,text:a})},$e=d.memo(Ue,((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&u.xv.equals(t.leaf,e.leaf)&&t.leaf[te]===e.leaf[te])),ze=e=>{var{attributes:t,children:r}=e;return d.createElement("span",Object.assign({},t),r)},Ve=e=>{for(var{decorations:t,isLast:r,parent:a,renderPlaceholder:n,renderLeaf:o,text:i}=e,l=w(),s=(0,d.useRef)(null),c=u.xv.decorations(i,t),f=me.findKey(l,i),v=[],h=0;h<c.length;h++){var p=c[h];v.push(d.createElement($e,{isLast:r&&h===c.length-1,key:"".concat(f.id,"-").concat(h),renderPlaceholder:n,leaf:p,text:i,parent:a,renderLeaf:o}))}var g=(0,d.useCallback)((e=>{var t=_.get(l);e?(null===t||void 0===t||t.set(f,e),q.set(i,e),I.set(e,i)):(null===t||void 0===t||t.delete(f),q.delete(i),s.current&&I.delete(s.current)),s.current=e}),[s,l,f,i]);return d.createElement("span",{"data-slate-node":"text",ref:g},v)},He=d.memo(Ve,((e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&((e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var a=e[r],n=t[r];if(a.anchor.offset!==n.anchor.offset||a.focus.offset!==n.focus.offset||!Ae(a,n))return!1}return!0})(t.decorations,e.decorations))),Ke=e=>{var{decorations:t,element:r,renderElement:a=(e=>d.createElement(Je,Object.assign({},e))),renderPlaceholder:o,renderLeaf:i,selection:l}=e,s=w(),c=rt(),f=s.isInline(r),v=me.findKey(s,r),h=(0,d.useCallback)((e=>{var t=_.get(s);e?(null===t||void 0===t||t.set(v,e),q.set(r,e),I.set(e,r)):(null===t||void 0===t||t.delete(v),q.delete(r))}),[s,v,r]),p=et({decorations:t,node:r,renderElement:a,renderPlaceholder:o,renderLeaf:i,selection:l}),g={"data-slate-node":"element",ref:h};if(f&&(g["data-slate-inline"]=!0),!f&&u.ML.hasInlines(s,r)){var m=u.NB.string(r),b=n()(m);"rtl"===b&&(g.dir=b)}if(u.ML.isVoid(s,r)){g["data-slate-void"]=!0,!c&&f&&(g.contentEditable=!1);var M=f?"span":"div",[[x]]=u.NB.texts(r);p=d.createElement(M,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},d.createElement(He,{renderPlaceholder:o,decorations:[],isLast:!1,parent:r,text:x})),R.set(x,0),N.set(x,r)}return a({attributes:g,children:p,element:r})},Xe=d.memo(Ke,((e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&((e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var a=e[r],n=t[r];if(!u.e6.equals(a,n)||!Ae(a,n))return!1}return!0})(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&u.e6.equals(e.selection,t.selection)))),Je=e=>{var{attributes:t,children:r,element:a}=e,n=w().isInline(a)?"span":"div";return d.createElement(n,Object.assign({},t,{style:{position:"relative"}}),r)},Ze=(0,d.createContext)((()=>[])),Ge=(0,d.createContext)(!1),Qe=()=>(0,d.useContext)(Ge),et=e=>{for(var{decorations:t,node:r,renderElement:a,renderPlaceholder:n,renderLeaf:o,selection:i}=e,l=(0,d.useContext)(Ze),s=w(),c=me.findPath(s,r),f=[],v=u.W_.isElement(r)&&!s.isInline(r)&&u.ML.hasInlines(s,r),h=0;h<r.children.length;h++){var p=c.concat(h),g=r.children[h],m=me.findKey(s,g),b=u.ML.range(s,p),M=i&&u.e6.intersection(b,i),x=l([g,p]);for(var k of t){var y=u.e6.intersection(k,b);y&&x.push(y)}u.W_.isElement(g)?f.push(d.createElement(Ge.Provider,{key:"provider-".concat(m.id),value:!!M},d.createElement(Xe,{decorations:x,element:g,key:m.id,renderElement:a,renderPlaceholder:n,renderLeaf:o,selection:M}))):f.push(d.createElement(He,{decorations:x,key:m.id,isLast:v&&h===r.children.length-1,parent:r,renderPlaceholder:n,renderLeaf:o,text:g})),R.set(g,h),N.set(g,r)}return f},tt=(0,d.createContext)(!1),rt=()=>(0,d.useContext)(tt),at=(0,d.createContext)(null);var nt={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},ot={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},it={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},lt=e=>{var t=nt[e],r=ot[e],a=it[e],n=t&&(0,v.P6)(t),o=r&&(0,v.P6)(r),i=a&&(0,v.P6)(a);return e=>!(!n||!n(e))||(!!(x&&o&&o(e))||!(x||!i||!i(e)))},st={isBold:lt("bold"),isCompose:lt("compose"),isMoveBackward:lt("moveBackward"),isMoveForward:lt("moveForward"),isDeleteBackward:lt("deleteBackward"),isDeleteForward:lt("deleteForward"),isDeleteLineBackward:lt("deleteLineBackward"),isDeleteLineForward:lt("deleteLineForward"),isDeleteWordBackward:lt("deleteWordBackward"),isDeleteWordForward:lt("deleteWordForward"),isExtendBackward:lt("extendBackward"),isExtendForward:lt("extendForward"),isExtendLineBackward:lt("extendLineBackward"),isExtendLineForward:lt("extendLineForward"),isItalic:lt("italic"),isMoveLineBackward:lt("moveLineBackward"),isMoveLineForward:lt("moveLineForward"),isMoveWordBackward:lt("moveWordBackward"),isMoveWordForward:lt("moveWordForward"),isRedo:lt("redo"),isSoftBreak:lt("insertSoftBreak"),isSplitBlock:lt("splitBlock"),isTransposeCharacter:lt("transposeCharacter"),isUndo:lt("undo")},dt={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class ct extends d.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var e,{node:t}=this.props;if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");null===(e=this.mutationObserver)||void 0===e||e.observe(t.current,dt)}componentDidMount(){var{receivedUserInput:e}=this.props,t=this.context;this.manager=((e,t)=>{var r=[],a=()=>{r=[]};return{registerMutations:a=>{if(t.current){var n=a.filter((t=>he(e,t,a)));r.push(...n)}},restoreDOM:function(){r.length>0&&(r.reverse().forEach((e=>{"characterData"!==e.type&&(e.removedNodes.forEach((t=>{e.target.insertBefore(t,e.nextSibling)})),e.addedNodes.forEach((t=>{e.target.removeChild(t)})))})),a())},clear:a}})(t,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,t,r,a,n=null===(e=this.mutationObserver)||void 0===e?void 0:e.takeRecords();null!==n&&void 0!==n&&n.length&&(null===(a=this.manager)||void 0===a||a.registerMutations(n));return null===(t=this.mutationObserver)||void 0===t||t.disconnect(),null===(r=this.manager)||void 0===r||r.restoreDOM(),null}componentDidUpdate(){var e;null===(e=this.manager)||void 0===e||e.clear(),this.observe()}componentWillUnmount(){var e;null===(e=this.mutationObserver)||void 0===e||e.disconnect()}render(){return this.props.children}}ct.contextType=m;var ut=k?ct:e=>{var{children:t}=e;return d.createElement(d.Fragment,null,t)},ft=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],vt=["text"];function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var gt=e=>d.createElement(d.Fragment,null,et(e)),mt=e=>{var t=(0,d.useCallback)((e=>d.createElement(wt,Object.assign({},e))),[]),{autoFocus:r,decorate:a=bt,onDOMBeforeInput:o,placeholder:l,readOnly:c=!1,renderElement:f,renderLeaf:v,renderPlaceholder:h=t,scrollSelectionIntoView:p=Mt,style:m={},as:b="div",disableDefaultStyles:x=!1}=e,E=g(e,ft),D=(()=>{var e=(0,d.useContext)(at);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:t}=e;return t})(),[O,R]=(0,d.useState)(!1),N=(0,d.useRef)(null),j=(0,d.useRef)([]),[Y,_]=(0,d.useState)(),{onUserInput:H,receivedUserInput:K}=function(){var e=w(),t=(0,d.useRef)(!1),r=(0,d.useRef)(0),a=(0,d.useCallback)((()=>{if(!t.current){t.current=!0;var a=me.getWindow(e);a.cancelAnimationFrame(r.current),r.current=a.requestAnimationFrame((()=>{t.current=!1}))}}),[e]);return(0,d.useEffect)((()=>()=>cancelAnimationFrame(r.current)),[]),{receivedUserInput:t,onUserInput:a}}(),[,Z]=(0,d.useReducer)((e=>e+1),0);ee.set(D,Z),U.set(D,c);var G=(0,d.useMemo)((()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1})),[]);(0,d.useEffect)((()=>{N.current&&r&&N.current.focus()}),[r]);var Q=(0,d.useRef)(),ae=(0,d.useMemo)((()=>s()((()=>{var e=Q.current;if((k||!me.isComposing(D))&&(!G.isUpdatingSelection||null!==e&&void 0!==e&&e.isFlushing())&&!G.isDraggingInternally){var t=me.findDocumentOrShadowRoot(D),{activeElement:r}=t,a=me.toDOMNode(D,D),n=t.getSelection();if(r===a?(G.latestElement=r,$.set(D,!0)):$.delete(D),!n)return u.YR.deselect(D);var{anchorNode:o,focusNode:i}=n,l=me.hasEditableTarget(D,o)||me.isTargetInsideNonReadonlyVoid(D,o),s=me.hasEditableTarget(D,i)||me.isTargetInsideNonReadonlyVoid(D,i);if(l&&s){var d=me.toSlateRange(D,n,{exactMatch:!1,suppressThrow:!0});d&&(me.isComposing(D)||null!==e&&void 0!==e&&e.hasPendingChanges()||null!==e&&void 0!==e&&e.isFlushing()?null===e||void 0===e||e.handleUserSelect(d):u.YR.select(D,d))}!c||l&&s||u.YR.deselect(D)}}),100)),[D,c,G]),le=(0,d.useMemo)((()=>i()(ae,0)),[ae]);Q.current=Re({node:N,onDOMSelectionChange:ae,scheduleOnDOMSelectionChange:le}),Be((()=>{var e,t,r;N.current&&(r=ne(N.current))?(W.set(D,r),A.set(D,N.current),q.set(D,N.current),I.set(N.current,D)):q.delete(D);var{selection:a}=D,n=me.findDocumentOrShadowRoot(D).getSelection();if(n&&me.isFocused(D)&&(null===(e=Q.current)||void 0===e||!e.hasPendingAction())){var o=e=>{var t="None"!==n.type;if(a||t){var r,o=n.focusNode;if(y&&n.rangeCount>1){var i=n.getRangeAt(0),l=n.getRangeAt(n.rangeCount-1);r=i.startContainer===o?l.endContainer:i.startContainer}else r=n.anchorNode;var s=A.get(D),d=!1;if(s.contains(r)&&s.contains(o)&&(d=!0),t&&d&&a&&!e){var c=me.toSlateRange(D,n,{exactMatch:!0,suppressThrow:!0});if(c&&u.e6.equals(c,a)){var f,v;if(!G.hasMarkPlaceholder)return;if(null!==(f=r)&&void 0!==f&&null!==(v=f.parentElement)&&void 0!==v&&v.hasAttribute("data-slate-mark-placeholder"))return}}if(!a||me.hasRange(D,a)){G.isUpdatingSelection=!0;var h=a&&me.toDOMRange(D,a);return h?(me.isComposing(D)&&!k?n.collapseToEnd():u.e6.isBackward(a)?n.setBaseAndExtent(h.endContainer,h.endOffset,h.startContainer,h.startOffset):n.setBaseAndExtent(h.startContainer,h.startOffset,h.endContainer,h.endOffset),p(D,h)):n.removeAllRanges(),h}D.selection=me.toSlateRange(D,n,{exactMatch:!1,suppressThrow:!0})}};n.rangeCount<=1&&o();var i="action"===(null===(t=Q.current)||void 0===t?void 0:t.isFlushing());if(k&&i){var l=null,s=requestAnimationFrame((()=>{if(i){var e=e=>{try{me.toDOMNode(D,D).focus(),o(e)}catch(t){}};e(),l=setTimeout((()=>{e(!0),G.isUpdatingSelection=!1}))}}));return()=>{cancelAnimationFrame(s),l&&clearTimeout(l)}}setTimeout((()=>{G.isUpdatingSelection=!1}))}}));var se=(0,d.useCallback)((e=>{if(H(),!c&&me.hasEditableTarget(D,e.target)&&!yt(e,o)){var t;if(Q.current)return Q.current.handleDOMBeforeInput(e);le.flush(),ae.flush();var{selection:r}=D,{inputType:a}=e,n=e.dataTransfer||e.data||void 0,i="insertCompositionText"===a||"deleteCompositionText"===a;if(i&&me.isComposing(D))return;var l=!1;if("insertText"===a&&r&&u.e6.isCollapsed(r)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==r.anchor.offset){var s,d;l=!0,D.marks&&(l=!1);var{anchor:f}=r,[v,h]=me.toDOMPoint(D,f),p=null===(s=v.parentElement)||void 0===s?void 0:s.closest("a"),g=me.getWindow(D);if(l&&p&&me.hasDOMNode(D,p)){var m,w=null===g||void 0===g?void 0:g.document.createTreeWalker(p,NodeFilter.SHOW_TEXT).lastChild();w===v&&(null===(m=w.textContent)||void 0===m?void 0:m.length)===h&&(l=!1)}if(l&&v.parentElement&&"pre"===(null===g||void 0===g||null===(d=g.getComputedStyle(v.parentElement))||void 0===d?void 0:d.whiteSpace)){var b=u.ML.above(D,{at:f.path,match:e=>u.W_.isElement(e)&&u.ML.isBlock(D,e)});b&&u.NB.string(b[0]).includes("\t")&&(l=!1)}}if(!a.startsWith("delete")||a.startsWith("deleteBy")){var[M]=e.getTargetRanges();if(M){var x=me.toSlateRange(D,M,{exactMatch:!1,suppressThrow:!1});if(!r||!u.e6.equals(r,x)){l=!1;var k=!i&&D.selection&&u.ML.rangeRef(D,D.selection);u.YR.select(D,x),k&&V.set(D,k)}}}if(i)return;if(l||e.preventDefault(),r&&u.e6.isExpanded(r)&&a.startsWith("delete")){var y=a.endsWith("Backward")?"backward":"forward";return void u.ML.deleteFragment(D,{direction:y})}switch(a){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":u.ML.deleteFragment(D);break;case"deleteContent":case"deleteContentForward":u.ML.deleteForward(D);break;case"deleteContentBackward":u.ML.deleteBackward(D);break;case"deleteEntireSoftLine":u.ML.deleteBackward(D,{unit:"line"}),u.ML.deleteForward(D,{unit:"line"});break;case"deleteHardLineBackward":u.ML.deleteBackward(D,{unit:"block"});break;case"deleteSoftLineBackward":u.ML.deleteBackward(D,{unit:"line"});break;case"deleteHardLineForward":u.ML.deleteForward(D,{unit:"block"});break;case"deleteSoftLineForward":u.ML.deleteForward(D,{unit:"line"});break;case"deleteWordBackward":u.ML.deleteBackward(D,{unit:"word"});break;case"deleteWordForward":u.ML.deleteForward(D,{unit:"word"});break;case"insertLineBreak":u.ML.insertSoftBreak(D);break;case"insertParagraph":u.ML.insertBreak(D);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===a&&me.isComposing(D)&&(R(!1),z.set(D,!1)),"DataTransfer"===(null===n||void 0===n?void 0:n.constructor.name)?me.insertData(D,n):"string"===typeof n&&(l?j.current.push((()=>u.ML.insertText(D,n))):u.ML.insertText(D,n))}var C=null===(t=V.get(D))||void 0===t?void 0:t.unref();V.delete(D),!C||D.selection&&u.e6.equals(D.selection,C)||u.YR.select(D,C)}}),[D,ae,H,o,c,le]),de=(0,d.useCallback)((e=>{null==e?(ae.cancel(),le.cancel(),A.delete(D),q.delete(D),N.current&&P&&N.current.removeEventListener("beforeinput",se)):P&&e.addEventListener("beforeinput",se),N.current=e}),[ae,le,D,se]);Be((()=>{var e=me.getWindow(D);return e.document.addEventListener("selectionchange",le),()=>{e.document.removeEventListener("selectionchange",le)}}),[le]);var ce=a([D,[]]),ue=l&&1===D.children.length&&1===Array.from(u.NB.texts(D)).length&&""===u.NB.string(D)&&!O,fe=(0,d.useCallback)((e=>{var t;e&&ue?_(null===(t=e.getBoundingClientRect())||void 0===t?void 0:t.height):_(void 0)}),[ue]);if(ue){var ve=u.ML.start(D,[]);ce.push({[te]:!0,placeholder:l,onPlaceholderResize:fe,anchor:ve,focus:ve})}var{marks:he}=D;if(G.hasMarkPlaceholder=!1,D.selection&&u.e6.isCollapsed(D.selection)&&he){var{anchor:pe}=D.selection,ge=u.NB.leaf(D,pe.path),we=g(ge,vt);if(!u.xv.equals(ge,he,{loose:!0})){G.hasMarkPlaceholder=!0;var be=Object.fromEntries(Object.keys(we).map((e=>[e,null])));ce.push(pt(pt(pt({[re]:!0},be),he),{},{anchor:pe,focus:pe}))}}return(0,d.useEffect)((()=>{setTimeout((()=>{var{selection:e}=D;if(e){var{anchor:t}=e,r=u.NB.leaf(D,t.path);if(he&&!u.xv.equals(r,he,{loose:!0}))return void X.set(D,he)}X.delete(D)}))})),d.createElement(tt.Provider,{value:c},d.createElement(Ze.Provider,{value:a},d.createElement(ut,{node:N,receivedUserInput:K},d.createElement(b,Object.assign({role:c?void 0:"textbox","aria-multiline":!c||void 0},E,{spellCheck:!(!P&&F)&&E.spellCheck,autoCorrect:P||!F?E.autoCorrect:"false",autoCapitalize:P||!F?E.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!c,zindex:-1,suppressContentEditableWarning:!0,ref:de,style:pt(pt({},x?{}:pt({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},Y?{minHeight:Y}:{})),m),onBeforeInput:(0,d.useCallback)((e=>{if(!P&&!c&&!xt(e,E.onBeforeInput)&&me.hasSelectableTarget(D,e.target)&&(e.preventDefault(),!me.isComposing(D))){var t=e.data;u.ML.insertText(D,t)}}),[E.onBeforeInput,D,c]),onInput:(0,d.useCallback)((e=>{if(!xt(e,E.onInput))if(Q.current)Q.current.handleInput();else{for(var t of j.current)t();j.current=[]}}),[E.onInput]),onBlur:(0,d.useCallback)((e=>{if(!c&&!G.isUpdatingSelection&&me.hasSelectableTarget(D,e.target)&&!xt(e,E.onBlur)){var t=me.findDocumentOrShadowRoot(D);if(G.latestElement!==t.activeElement){var{relatedTarget:r}=e;if(r!==me.toDOMNode(D,D)&&(!oe(r)||!r.hasAttribute("data-slate-spacer"))){if(null!=r&&ie(r)&&me.hasDOMNode(D,r)){var a=me.toSlateNode(D,r);if(u.W_.isElement(a)&&!D.isVoid(a))return}if(C){var n=t.getSelection();null===n||void 0===n||n.removeAllRanges()}$.delete(D)}}}}),[c,G.isUpdatingSelection,G.latestElement,D,E.onBlur]),onClick:(0,d.useCallback)((e=>{if(me.hasTarget(D,e.target)&&!xt(e,E.onClick)&&ie(e.target)){var t=me.toSlateNode(D,e.target),r=me.findPath(D,t);if(!u.ML.hasPath(D,r)||u.NB.get(D,r)!==t)return;if(3===e.detail&&r.length>=1){var a=r;if(!u.W_.isElement(t)||!u.ML.isBlock(D,t)){var n,o=u.ML.above(D,{match:e=>u.W_.isElement(e)&&u.ML.isBlock(D,e),at:r});a=null!==(n=null===o||void 0===o?void 0:o[1])&&void 0!==n?n:r.slice(0,1)}var i=u.ML.range(D,a);return void u.YR.select(D,i)}if(c)return;var l=u.ML.start(D,r),s=u.ML.end(D,r),d=u.ML.void(D,{at:l}),f=u.ML.void(D,{at:s});if(d&&f&&u.y$.equals(d[1],f[1])){var v=u.ML.range(D,l);u.YR.select(D,v)}}}),[D,E.onClick,c]),onCompositionEnd:(0,d.useCallback)((e=>{if(me.hasSelectableTarget(D,e.target)){var t;if(me.isComposing(D)&&(R(!1),z.set(D,!1)),null===(t=Q.current)||void 0===t||t.handleCompositionEnd(e),xt(e,E.onCompositionEnd)||k)return;if(!C&&!S&&!M&&!T&&!B&&e.data){var r=X.get(D);X.delete(D),void 0!==r&&(J.set(D,D.marks),D.marks=r),u.ML.insertText(D,e.data);var a=J.get(D);J.delete(D),void 0!==a&&(D.marks=a)}}}),[E.onCompositionEnd,D]),onCompositionUpdate:(0,d.useCallback)((e=>{me.hasSelectableTarget(D,e.target)&&!xt(e,E.onCompositionUpdate)&&(me.isComposing(D)||(R(!0),z.set(D,!0)))}),[E.onCompositionUpdate,D]),onCompositionStart:(0,d.useCallback)((e=>{if(me.hasSelectableTarget(D,e.target)){var t;if(null===(t=Q.current)||void 0===t||t.handleCompositionStart(e),xt(e,E.onCompositionStart)||k)return;R(!0);var{selection:r}=D;if(r){if(u.e6.isExpanded(r))return void u.ML.deleteFragment(D);var a=u.ML.above(D,{match:e=>u.W_.isElement(e)&&u.ML.isInline(D,e),mode:"highest"});if(a){var[,n]=a;if(u.ML.isEnd(D,r.anchor,n)){var o=u.ML.after(D,n);u.YR.setSelection(D,{anchor:o,focus:o})}}}}}),[E.onCompositionStart,D]),onCopy:(0,d.useCallback)((e=>{!me.hasSelectableTarget(D,e.target)||xt(e,E.onCopy)||kt(e)||(e.preventDefault(),me.setFragmentData(D,e.clipboardData,"copy"))}),[E.onCopy,D]),onCut:(0,d.useCallback)((e=>{if(!c&&me.hasSelectableTarget(D,e.target)&&!xt(e,E.onCut)&&!kt(e)){e.preventDefault(),me.setFragmentData(D,e.clipboardData,"cut");var{selection:t}=D;if(t)if(u.e6.isExpanded(t))u.ML.deleteFragment(D);else{var r=u.NB.parent(D,t.anchor.path);u.ML.isVoid(D,r)&&u.YR.delete(D)}}}),[c,D,E.onCut]),onDragOver:(0,d.useCallback)((e=>{if(me.hasTarget(D,e.target)&&!xt(e,E.onDragOver)){var t=me.toSlateNode(D,e.target);u.W_.isElement(t)&&u.ML.isVoid(D,t)&&e.preventDefault()}}),[E.onDragOver,D]),onDragStart:(0,d.useCallback)((e=>{if(!c&&me.hasTarget(D,e.target)&&!xt(e,E.onDragStart)){var t=me.toSlateNode(D,e.target),r=me.findPath(D,t);if(u.W_.isElement(t)&&u.ML.isVoid(D,t)||u.ML.void(D,{at:r,voids:!0})){var a=u.ML.range(D,r);u.YR.select(D,a)}G.isDraggingInternally=!0,me.setFragmentData(D,e.dataTransfer,"drag")}}),[c,D,E.onDragStart,G]),onDrop:(0,d.useCallback)((e=>{if(!c&&me.hasTarget(D,e.target)&&!xt(e,E.onDrop)){e.preventDefault();var t=D.selection,r=me.findEventRange(D,e),a=e.dataTransfer;u.YR.select(D,r),G.isDraggingInternally&&(!t||u.e6.equals(t,r)||u.ML.void(D,{at:r,voids:!0})||u.YR.delete(D,{at:t})),me.insertData(D,a),me.isFocused(D)||me.focus(D)}G.isDraggingInternally=!1}),[c,D,E.onDrop,G]),onDragEnd:(0,d.useCallback)((e=>{!c&&G.isDraggingInternally&&E.onDragEnd&&me.hasTarget(D,e.target)&&E.onDragEnd(e),G.isDraggingInternally=!1}),[c,G,E,D]),onFocus:(0,d.useCallback)((e=>{if(!c&&!G.isUpdatingSelection&&me.hasEditableTarget(D,e.target)&&!xt(e,E.onFocus)){var t=me.toDOMNode(D,D),r=me.findDocumentOrShadowRoot(D);if(G.latestElement=r.activeElement,y&&e.target!==t)return void t.focus();$.set(D,!0)}}),[c,G,D,E.onFocus]),onKeyDown:(0,d.useCallback)((e=>{if(!c&&me.hasEditableTarget(D,e.target)){var t;null===(t=Q.current)||void 0===t||t.handleKeyDown(e);var{nativeEvent:r}=e;if(me.isComposing(D)&&!1===r.isComposing&&(z.set(D,!1),R(!1)),xt(e,E.onKeyDown)||me.isComposing(D))return;var{selection:a}=D,o=D.children[null!==a?a.focus.path[0]:0],i="rtl"===n()(u.NB.string(o));if(st.isRedo(r)){e.preventDefault();var l=D;return void("function"===typeof l.redo&&l.redo())}if(st.isUndo(r)){e.preventDefault();var s=D;return void("function"===typeof s.undo&&s.undo())}if(st.isMoveLineBackward(r))return e.preventDefault(),void u.YR.move(D,{unit:"line",reverse:!0});if(st.isMoveLineForward(r))return e.preventDefault(),void u.YR.move(D,{unit:"line"});if(st.isExtendLineBackward(r))return e.preventDefault(),void u.YR.move(D,{unit:"line",edge:"focus",reverse:!0});if(st.isExtendLineForward(r))return e.preventDefault(),void u.YR.move(D,{unit:"line",edge:"focus"});if(st.isMoveBackward(r))return e.preventDefault(),void(a&&u.e6.isCollapsed(a)?u.YR.move(D,{reverse:!i}):u.YR.collapse(D,{edge:"start"}));if(st.isMoveForward(r))return e.preventDefault(),void(a&&u.e6.isCollapsed(a)?u.YR.move(D,{reverse:i}):u.YR.collapse(D,{edge:"end"}));if(st.isMoveWordBackward(r))return e.preventDefault(),a&&u.e6.isExpanded(a)&&u.YR.collapse(D,{edge:"focus"}),void u.YR.move(D,{unit:"word",reverse:!i});if(st.isMoveWordForward(r))return e.preventDefault(),a&&u.e6.isExpanded(a)&&u.YR.collapse(D,{edge:"focus"}),void u.YR.move(D,{unit:"word",reverse:i});if(P){if((L||C)&&a&&(st.isDeleteBackward(r)||st.isDeleteForward(r))&&u.e6.isCollapsed(a)){var d=u.NB.parent(D,a.anchor.path);if(u.W_.isElement(d)&&u.ML.isVoid(D,d)&&(u.ML.isInline(D,d)||u.ML.isBlock(D,d)))return e.preventDefault(),void u.ML.deleteBackward(D,{unit:"block"})}}else{if(st.isBold(r)||st.isItalic(r)||st.isTransposeCharacter(r))return void e.preventDefault();if(st.isSoftBreak(r))return e.preventDefault(),void u.ML.insertSoftBreak(D);if(st.isSplitBlock(r))return e.preventDefault(),void u.ML.insertBreak(D);if(st.isDeleteBackward(r))return e.preventDefault(),void(a&&u.e6.isExpanded(a)?u.ML.deleteFragment(D,{direction:"backward"}):u.ML.deleteBackward(D));if(st.isDeleteForward(r))return e.preventDefault(),void(a&&u.e6.isExpanded(a)?u.ML.deleteFragment(D,{direction:"forward"}):u.ML.deleteForward(D));if(st.isDeleteLineBackward(r))return e.preventDefault(),void(a&&u.e6.isExpanded(a)?u.ML.deleteFragment(D,{direction:"backward"}):u.ML.deleteBackward(D,{unit:"line"}));if(st.isDeleteLineForward(r))return e.preventDefault(),void(a&&u.e6.isExpanded(a)?u.ML.deleteFragment(D,{direction:"forward"}):u.ML.deleteForward(D,{unit:"line"}));if(st.isDeleteWordBackward(r))return e.preventDefault(),void(a&&u.e6.isExpanded(a)?u.ML.deleteFragment(D,{direction:"backward"}):u.ML.deleteBackward(D,{unit:"word"}));if(st.isDeleteWordForward(r))return e.preventDefault(),void(a&&u.e6.isExpanded(a)?u.ML.deleteFragment(D,{direction:"forward"}):u.ML.deleteForward(D,{unit:"word"}))}}}),[c,D,E.onKeyDown]),onPaste:(0,d.useCallback)((e=>{c||!me.hasEditableTarget(D,e.target)||xt(e,E.onPaste)||(!P||(e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length)(e.nativeEvent)||C)&&(e.preventDefault(),me.insertData(D,e.clipboardData))}),[c,D,E.onPaste])}),d.createElement(gt,{decorations:ce,node:D,renderElement:f,renderPlaceholder:h,renderLeaf:v,selection:D.selection})))))},wt=e=>{var{attributes:t,children:r}=e;return d.createElement("span",Object.assign({},t),r,k&&d.createElement("br",null))},bt=()=>[],Mt=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&u.e6.isCollapsed(e.selection))){var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),(0,c.Z)(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},xt=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.isDefaultPrevented()||e.isPropagationStopped()},kt=e=>ie(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),yt=(e,t)=>{if(!t)return!1;var r=t(e);return null!=r?r:e.defaultPrevented},Ct=(0,d.createContext)(!1);var Et=(0,d.createContext)({});var Lt=["editor","children","onChange","initialValue"],Dt=e=>{var{editor:t,children:r,onChange:a,initialValue:n}=e,o=g(e,Lt),[i,l]=d.useState((()=>{if(!u.NB.isNodeList(n))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(u.o4.stringify(n)));if(!u.ML.isEditor(t))throw new Error("[Slate] editor is invalid! You passed: ".concat(u.o4.stringify(t)));return t.children=n,Object.assign(t,o),{v:0,editor:t}})),{selectorContext:s,onChange:c}=function(e){var t=(0,d.useRef)([]).current,r=(0,d.useRef)({editor:e}).current,a=(0,d.useCallback)((e=>{r.editor=e,t.forEach((t=>t(e)))}),[t,r]);return{selectorContext:(0,d.useMemo)((()=>({getSlate:()=>r.editor,addEventListener:e=>(t.push(e),()=>{t.splice(t.indexOf(e),1)})})),[t,r]),onChange:a}}(t),f=(0,d.useCallback)((()=>{a&&a(t.children),l((e=>({v:e.v+1,editor:t}))),c(t)}),[t,c,a]);(0,d.useEffect)((()=>(H.set(t,f),()=>{H.set(t,(()=>{}))})),[t,f]);var[v,h]=(0,d.useState)(me.isFocused(t));return(0,d.useEffect)((()=>{h(me.isFocused(t))}),[t]),Be((()=>{var e=()=>h(me.isFocused(t));return b>=17?(document.addEventListener("focusin",e),document.addEventListener("focusout",e),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",e)}):(document.addEventListener("focus",e,!0),document.addEventListener("blur",e,!0),()=>{document.removeEventListener("focus",e,!0),document.removeEventListener("blur",e,!0)})}),[]),d.createElement(Et.Provider,{value:s},d.createElement(at.Provider,{value:i},d.createElement(m.Provider,{value:i.editor},d.createElement(Ct.Provider,{value:v},r))))},Ot=(e,t)=>{var r=(t.top+t.bottom)/2;return e.top<=r&&e.bottom>=r},St=(e,t,r)=>{var a=me.toDOMRange(e,t).getBoundingClientRect(),n=me.toDOMRange(e,r).getBoundingClientRect();return Ot(a,n)&&Ot(n,a)},Bt=(e,t)=>{var r=u.ML.range(e,u.e6.end(t)),a=Array.from(u.ML.positions(e,{at:t})),n=0,o=a.length,i=Math.floor(o/2);if(St(e,u.ML.range(e,a[n]),r))return u.ML.range(e,a[n],r);if(a.length<2)return u.ML.range(e,a[a.length-1],r);for(;i!==a.length&&i!==n;)St(e,u.ML.range(e,a[i]),r)?o=i:n=i,i=Math.floor((n+o)/2);return u.ML.range(e,a[o],r)};function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Ft(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Pt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x-slate-fragment",r=e,{apply:a,onChange:n,deleteBackward:o,addMark:i,removeMark:l}=r;return _.set(r,new WeakMap),r.addMark=(e,t)=>{var a,n;null===(a=K.get(r))||void 0===a||a(),!X.get(r)&&null!==(n=Z.get(r))&&void 0!==n&&n.length&&X.set(r,null),J.delete(r),i(e,t)},r.removeMark=e=>{var t;!X.get(r)&&null!==(t=Z.get(r))&&void 0!==t&&t.length&&X.set(r,null),J.delete(r),l(e)},r.deleteBackward=e=>{if("line"!==e)return o(e);if(r.selection&&u.e6.isCollapsed(r.selection)){var t=u.ML.above(r,{match:e=>u.W_.isElement(e)&&u.ML.isBlock(r,e),at:r.selection});if(t){var[,a]=t,n=u.ML.range(r,a,r.selection.anchor),i=Bt(r,n);u.e6.isCollapsed(i)||u.YR.delete(r,{at:i})}}},r.apply=e=>{var t=[],n=Z.get(r);if(null!==n&&void 0!==n&&n.length){var o=n.map((t=>Le(t,e))).filter(Boolean);Z.set(r,o)}var i=Q.get(r);i&&Q.set(r,Ee(r,i,e));var l=G.get(r);if(null!==l&&void 0!==l&&l.at){var s=u.E9.isPoint(null===l||void 0===l?void 0:l.at)?Ce(r,l.at,e):Ee(r,l.at,e);G.set(r,s?Ft(Ft({},l),{},{at:s}):null)}switch(e.type){case"insert_text":case"remove_text":case"set_node":case"split_node":t.push(...Rt(r,e.path));break;case"set_selection":var d;null===(d=V.get(r))||void 0===d||d.unref(),V.delete(r);break;case"insert_node":case"remove_node":t.push(...Rt(r,u.y$.parent(e.path)));break;case"merge_node":var c=u.y$.previous(e.path);t.push(...Rt(r,c));break;case"move_node":var f=u.y$.common(u.y$.parent(e.path),u.y$.parent(e.newPath));t.push(...Rt(r,f))}for(var[v,h]of(a(e),t)){var[p]=u.ML.node(r,v);Y.set(p,h)}},r.setFragmentData=e=>{var{selection:a}=r;if(a){var[n,o]=u.e6.edges(a),i=u.ML.void(r,{at:n.path}),l=u.ML.void(r,{at:o.path});if(!u.e6.isCollapsed(a)||i){var s=me.toDOMRange(r,a),d=s.cloneContents(),c=d.childNodes[0];if(d.childNodes.forEach((e=>{e.textContent&&""!==e.textContent.trim()&&(c=e)})),l){var[f]=l,v=s.cloneRange(),h=me.toDOMNode(r,f);v.setEndAfter(h),d=v.cloneContents()}if(i&&(c=d.querySelector("[data-slate-spacer]")),Array.from(d.querySelectorAll("[data-slate-zero-width]")).forEach((e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""})),se(c)){var p=c.ownerDocument.createElement("span");p.style.whiteSpace="pre",p.appendChild(c),d.appendChild(p),c=p}var g=r.getFragment(),m=JSON.stringify(g),w=window.btoa(encodeURIComponent(m));c.setAttribute("data-slate-fragment",w),e.setData("application/".concat(t),w);var b=d.ownerDocument.createElement("div");return b.appendChild(d),b.setAttribute("hidden","true"),d.ownerDocument.body.appendChild(b),e.setData("text/html",b.innerHTML),e.setData("text/plain",ue(b)),d.ownerDocument.body.removeChild(b),e}}},r.insertData=e=>{r.insertFragmentData(e)||r.insertTextData(e)},r.insertFragmentData=e=>{var a=e.getData("application/".concat(t))||ve(e);if(a){var n=decodeURIComponent(window.atob(a)),o=JSON.parse(n);return r.insertFragment(o),!0}return!1},r.insertTextData=e=>{var t=e.getData("text/plain");if(t){var a=t.split(/\r\n|\r|\n/),n=!1;for(var o of a)n&&u.YR.splitNodes(r,{always:!0}),r.insertText(o),n=!0;return!0}return!1},r.onChange=e=>{(b<18?h.unstable_batchedUpdates:e=>e())((()=>{var t=H.get(r);t&&t(),n(e)}))},r},Rt=(e,t)=>{var r=[];for(var[a,n]of u.ML.levels(e,{at:t})){var o=me.findKey(e,a);r.push([n,o])}return r}}}]);