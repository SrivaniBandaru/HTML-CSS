"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8223],{48223:function(t,e,r){r.d(e,{Z:function(){return it}});var o=r(59499),i=r(4730),n=r(39781),a=r(93772),l=r(83625),c=r(50029),s=r(87794),p=r.n(s),d=r(2759),u=r(89592),w=r(98057),b=r(85266),g=r(49798),m=r(58994),f=r(23176),y=r(85124),h=r(27484),v=r.n(h),x=r(67294),k=r(49770),Z=r(71175),j=r(2761),O=r(35944);function P(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function S(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?P(Object(r),!0).forEach((function(e){(0,o.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var I={name:"go5779",styles:"overflow:hidden;border-radius:0.5rem;border-width:1px;--tw-bg-opacity:1;background-color:rgb(255 255 255 / var(--tw-bg-opacity));--tw-shadow:0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 20px 25px -5px var(--tw-shadow-color), 0 8px 10px -6px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow);.dark &{border-color:rgb(30 41 59 / 0.8);--tw-bg-opacity:1;background-color:rgb(2 6 23 / var(--tw-bg-opacity));}"},z=function(t){var e=t.children,r=t.floatingProps;return(0,O.tZ)("div",S(S({},r),{},{children:(0,O.tZ)("div",{css:I,children:e})}))},E=function(){var t=(0,c.Z)(p().mark((function t(e){var r,o,i;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new g.Z(e,{}),t.next=3,o.exec();case 3:return t.next=5,null===(r=o.rawResponse)||void 0===r?void 0:r.json();case 5:return i=t.sent,t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C={name:"1xpc7k4",styles:"width:18rem;padding:1rem;:focus{outline:2px solid transparent;outline-offset:2px;}"},F={name:"bcffy2",styles:"display:flex;align-items:center;justify-content:space-between"},B={name:"11uwiei",styles:"position:relative;height:5rem;width:5rem;border-radius:9999px;border-width:1px;--tw-bg-opacity:1;background-color:rgb(241 245 249 / var(--tw-bg-opacity));.dark &{--tw-border-opacity:1;border-color:rgb(30 41 59 / var(--tw-border-opacity));--tw-bg-opacity:1;background-color:rgb(30 41 59 / var(--tw-bg-opacity));}"},D={name:"q7vwpz",styles:"z-index:20;border-radius:9999px"},N={name:"i5s9dy",styles:"padding-left:0.75rem;padding-right:0.75rem;padding-top:0.375rem;padding-bottom:0.375rem;font-size:0.875rem;line-height:1.25rem"},U={name:"1fuh9hb",styles:"margin-right:0.5rem;height:1rem;width:1rem;fill:currentColor"},X={name:"1fuh9hb",styles:"margin-right:0.5rem;height:1rem;width:1rem;fill:currentColor"},_={name:"o0ajnr",styles:"@keyframes pulse{50%{opacity:.5;}}animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;border-radius:9999px;--tw-bg-opacity:1;background-color:rgb(241 245 249 / var(--tw-bg-opacity));padding-top:1rem;padding-bottom:1rem;padding-left:2.75rem;padding-right:2.75rem;.dark &{--tw-bg-opacity:1;background-color:rgb(30 41 59 / var(--tw-bg-opacity));}"},A={name:"f8jhwt",styles:"margin-top:0.5rem;flex:1 1 0%"},M={name:"1k2qevl",styles:'margin-bottom:0.5rem;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-family:Suisse Intl, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-size:1.25rem;line-height:1.75rem;font-weight:700;--tw-text-opacity:1;color:rgb(15 23 42 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));}'},R={name:"119f6lv",styles:"margin-bottom:0.5rem;--tw-text-opacity:1;color:rgb(15 23 42 / var(--tw-text-opacity));word-break:normal;overflow-wrap:anywhere;.dark &{--tw-text-opacity:1;color:rgb(226 232 240 / var(--tw-text-opacity));}"},Y={name:"lw04sf",styles:"margin-top:0.5rem;display:flex;flex:1 1 0%;flex-direction:row;align-items:center;font-size:0.875rem;line-height:1.25rem"},V={name:"fhxb3m",styles:"display:flex;flex-direction:row;align-items:center"},L={name:"5puit3",styles:"margin-right:0.25rem;--tw-text-opacity:1;color:rgb(15 23 42 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));}"},q={name:"1y075du",styles:"--tw-text-opacity:1;color:rgb(100 116 139 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(226 232 240 / var(--tw-text-opacity));}"},H={name:"94vz98",styles:"margin-top:0.5rem;display:flex;flex-direction:row;align-items:center;font-size:0.875rem;line-height:1.25rem;font-weight:700;--tw-text-opacity:1;color:rgb(37 99 235 / var(--tw-text-opacity))"},J={name:"1h52dri",styles:"overflow:hidden;text-overflow:ellipsis;white-space:nowrap"},T={name:"71n4um",styles:"margin-top:0.5rem;display:block;border-radius:0.5rem;--tw-bg-opacity:1;background-color:rgb(241 245 249 / var(--tw-bg-opacity));padding:0.75rem;.dark &{--tw-bg-opacity:1;background-color:rgb(15 23 42 / var(--tw-bg-opacity));}"},G={name:"iszni2",styles:"font-size:0.875rem;line-height:1.25rem;font-weight:600;.dark &{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity));}"},K={name:"dvcc6f",styles:"margin-top:0.25rem;display:flex;flex-direction:row;flex-wrap:wrap;align-items:center;--tw-text-opacity:1;color:rgb(71 85 105 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(241 245 249 / var(--tw-text-opacity));}"},Q={name:"zlt6ii",styles:"margin-right:1rem;display:inline-block;font-size:0.75rem;line-height:1rem;--tw-text-opacity:1;color:rgb(100 116 139 / var(--tw-text-opacity));.dark &{--tw-text-opacity:1;color:rgb(226 232 240 / var(--tw-text-opacity));}"},W={name:"p3z88p",styles:'font-family:Suisse Intl, ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-size:0.875rem;line-height:1.25rem;font-weight:700;word-break:normal;overflow-wrap:anywhere'},$=(0,x.forwardRef)((function(t,e){var r=t.publicationId,o=t.currentUser,i=(0,k.Z)("/api/publication/publication-sheet?publicationId=".concat(r),E),n=i.data,a=i.isValidating,l=(0,x.useRef)(null);(0,x.useEffect)((function(){var t;n&&(null===(t=l.current)||void 0===t||t.focus({preventScroll:!0}))}),[n]);var s=(0,k.Z)(!a&&null!==n&&void 0!==n&&n._id&&o?"/ajax/publication/".concat(n._id,"/follow-state"):null,E),h=s.data,P=s.mutate,I=s.isValidating,$=null===h||void 0===h?void 0:h.publication,tt=(0,x.useState)(!0),et=tt[0],rt=tt[1],ot=(0,b.Z)({placement:"bottom",triggerRef:e,isVisible:et,offset:{mainAxis:15},onVisibilityChange:function(){return rt(!0)},hasArrow:!1}).getPopoverProps,it=function(){var t=(0,c.Z)(p().mark((function t(e){var r,i,n;return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o){t.next=3;break}return window.location.href="/onboard?next=".concat(window.location.pathname),t.abrupt("return");case 3:return"/ajax/publication/follow",i=new g.Z("/ajax/publication/follow",{method:"POST",credentials:"same-origin",body:JSON.stringify({publicationId:e})}),n=S(S({},h),{},{publication:{beingFollowed:!(null!==h&&void 0!==h&&null!==(r=h.publication)&&void 0!==r&&r.beingFollowed)}}),P(n,!1),t.next=9,i.exec();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();if(!n)return null;var nt=(0,j.lL)(n),at=(0,j.Z8)(n),lt={href:nt,target:"_blank",rel:"noopener"};return(0,O.tZ)(z,S(S({},ot()),{},{children:(0,O.BX)("div",{ref:l,tabIndex:0,css:C,children:[(0,O.BX)("div",{css:F,children:[(0,O.tZ)("a",S(S({css:B},lt),{},{children:(0,O.tZ)(Z.Z,{originalSrc:n.favicon||m.Y9,alt:n.title,src:(0,f.resizeImage)(n.favicon,{w:150,h:150,c:"face"},m.Y9,!1),css:D,layout:"fill",objectFit:"contain"})})),I?(0,O.tZ)("div",{css:_}):(0,O.BX)(d.Z,{type:"button",variant:null!==$&&void 0!==$&&$.beingFollowed?"primary-outline":"primary",onClick:function(){return it(n._id)},css:N,children:[null!==$&&void 0!==$&&$.beingFollowed?(0,O.tZ)(u.Z,{css:U}):(0,O.tZ)(w.Z,{css:X}),(0,O.BX)("span",{children:["Follow",null!==$&&void 0!==$&&$.beingFollowed?"ing":""]})]})]}),(0,O.BX)("div",{css:A,children:[n.title&&(0,O.tZ)("h1",{css:M,children:(0,O.tZ)("a",S(S({},lt),{},{children:n.title}))}),n.description&&(0,O.tZ)("p",{css:R,children:n.description}),n.numFollowers>=0&&(0,O.tZ)("div",{css:Y,children:(0,O.BX)("a",S(S({},lt),{},{css:V,children:[(0,O.tZ)("strong",{css:L,children:(0,y.sy)(n.numFollowers)}),(0,O.tZ)("span",{css:q,children:n.numFollowers>1?"followers":"follower"})]}))}),(0,O.tZ)("a",S(S({},lt),{},{css:H,children:(0,O.tZ)("span",{css:J,children:at})}))]}),n.latestPost&&(0,O.BX)("a",{href:(0,j.U_)(n.latestPost,n),css:T,children:[(0,O.tZ)("p",{css:G,children:"Latest Article \u2728"}),(0,O.BX)("div",{css:K,children:[(0,O.tZ)("span",{css:Q,children:v()(n.latestPost.dateAdded).format("D MMM, YYYY")}),(0,O.BX)("span",{css:W,children:[n.latestPost.title.substring(0,75),n.latestPost.title.length>75?"\u2026":""]})]})]})]})}))})),tt=$,et=["publicationId","children"];function rt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,o)}return r}function ot(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(r),!0).forEach((function(e){(0,o.Z)(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function it(t){var e=t.publicationId,r=t.children,o=(0,i.Z)(t,et),c=(0,l.Z)().width,s=(0,a.Z)().data,p=(0,x.useRef)(null),d=(0,n.v)(),u=d.showCommonPopover,w=d.hideCommonPopover,b=c>1024&&e,g=b?{onMouseEnter:function(){e&&u((0,O.tZ)(tt,{currentUser:s,publicationId:e,ref:p}))},onMouseLeave:w}:{};return(0,O.tZ)("div",ot(ot(ot({ref:p,css:["height:100%;width:100%;",b&&{":hover":{cursor:"pointer",opacity:"0.8"}},"",""]},g),o),{},{children:r}))}}}]);